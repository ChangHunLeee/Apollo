<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.apollo.step.dao.StepDAO">
    <select id="getSteps" parameterType="String" resultType="com.apollo.vo.StepDTO">
    select * from step where pid = #{pid}
    </select>

	<insert id="insertStep" parameterType="com.apollo.vo.StepDTO">
		insert into step(sid, sname, sday, eday, pid, fid, mgr, methodologyid, mid) 
		values (seq_sid.nextval, '${sname}', '${sday}', '${eday}', '${pid}', '${fid}', '${mgr}', '${methodologyid}', '${mid}')
	</insert>

	<select id ="getProjectIdByStepId" parameterType="Integer"> 
	  select pid from step where sid=#{sid}
	</select>
	
    <select id ="selectTstatusBySid" resultType="com.apollo.vo.TstatusDTO" parameterType="Integer"> 
	  select ts.TSTATUS, ts.TSTATUSID, ts.COLOR from step s join TSTATUS ts on s.METHODOLOGYID = ts.METHODOLOGYID where sid=#{sid}
	</select>

</mapper>